<!DOCTYPE html>
<html>
  <head>
    <title> FPS </title>
    <meta charset="UTF-8">
  </head>

  <body style="background-color: #bfbfbf">
    <canvas id="canvas" width="800" height="600" style="background-color: #eee"></canvas>

    <!--These are the scrips from Phoria to render the 3D graphics-->

    <script src="static/scripts/gl-matrix.js"></script>
    <script src="static/scripts/phoria-util.js"></script>
    <script src="static/scripts/phoria-entity.js"></script>
    <script src="static/scripts/phoria-scene.js"></script>
    <script src="static/scripts/phoria-renderer.js"></script>
    <script src="static/scripts/dat.gui.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
  
    <script src="static/game.js"></script>

    <!--This is the script to implement the Facebook Login from the API -->
    <script>
      
      window.fbAsyncInit = function() {
      FB.init({
      appId      : '332847230172667',
      xfbml      : true,
      version    : 'v2.1'
      });
      };
      (function(d, s, id){
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
      
      function statusChangeCallback(response) {
      console.log('statusChangeCallback');
      console.log(response); 
      if (response.status === 'connected') {
      testAPI();
      } else if (response.status === 'not_authorized') {
      document.getElementById('status').innerHTML = 'Please log ' +
      'into this app.';
      } else {
      document.getElementById('status').innerHTML = 'Please log ' +
      'into Facebook.';
      }
      }
      function checkLoginState() {
      FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
      });
      }
      FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
      });
      (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
      function testAPI() {
      console.log('Welcome!  Fetching your information.... ');
      FB.api('/me', function(response) {
      console.log('Successful login for: ' + response.name);
      document.getElementById('status').innerHTML =
      'Thanks for logging in, ' + response.name + '!';
      });
      }
    </script>

    <!--The actual HTML/CSS layout-->

    <fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
    </fb:login-button>

    <div id="status">
    </div>

  </body>

</html>
